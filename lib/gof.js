module.exports=function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(1),r=a(3),s=a(4),u=a(18),c=function(){function e(t,a){n(this,e),s.GofValidation.validateConstructor(t,a,"geoOnFire()"),this._utils=o.GofUtils,this._db=new r.GofDb(t,a),this.registerEvents(),this._activeQuery={geohashes:[],entries:[],parameters:[],dbListeners:[]}}return i(e,[{key:"getLocationsByRadius",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50;s.GofValidation.validateLocationsByRadius(e,t,n,i,"getLocationsByRadius()"),this._activeQuery.parameters={center:e,radius:t,startAt:n,endAt:i};var o=this._utils.getBoundariesFromRadius(e,t),r=this._utils.caluclatePrecisionFromBoundaries(o);return this._activeQuery.geohashes=this._utils.getGeohashesInBoundaries(o,r),this._activeQuery.entries=this._db.getLocationsFromGeohashes(this._activeQuery.geohashes).then(function(n){return a._utils.getLocationsInRadius(n,e,t)}).then(function(e){return a._db.fetchLocations(e,n,i)}),this.getLocationsByRadius}},{key:"getLocationsByBoundaries",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;s.GofValidation.validateLocationsByBoundaries(e,a,n,"getLocationsByBoundaries()"),this._activeQuery.parameters={boundaries:e,startAt:a,endAt:n};var i=this._utils.caluclatePrecisionFromBoundaries(e);return this._activeQuery.geohashes=this._utils.getGeohashesInBoundaries(e,i),this._activeQuery.entries=this._db.getLocationsFromGeohashes(this._activeQuery.geohashes).then(function(a){return t._utils.getLocationsInBoundaries(a,e)}).then(function(e){return t._db.fetchLocations(e,a,n)}),this.getLocationsByBoundaries}},{key:"createEntry",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:9;s.GofValidation.validateCreateEntry(e,a,n,"createEntry()");var i=this._utils.getGeohashByLocation(e.location,n),o=this._utils.getGeohashPrecisions(i,a,n),r=this._utils.setPrecisionsForEntry(a,e);return this._db.pushEntry(r).then(function(a){return t._db.setGeohashLocations(a.key,e.location,o)})}},{key:"updateEntryLocation",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return s.GofValidation.validateUpdateEntryLocation(e,t,a,"updateEntryLocation()"),this._db.updateEntry(e,t,a)}},{key:"deleteEntry",value:function(e){return s.GofValidation.validateUpdateEntryLocation(e,"deleteEntry()"),this._db.deleteEntry(e)}},{key:"registerEvents",value:function(){var e=this;this.getLocationsByBoundaries.on=function(t){return e.attachBoundsEvent(t)},this.getLocationsByRadius.on=function(t){return e.attachRadiusEvent(t)},this.getLocationsByBoundaries.once=function(){return e._activeQuery.entries},this.getLocationsByRadius.once=function(){return e._activeQuery.entries}}},{key:"attachBoundsEvent",value:function(e){var t=this,a=new Event("bounds"),n=[],i={then:function(e){n.push(e),window.dispatchEvent(a)}};return this._activeQuery.dbListeners=u.GofDbListeners.attachDbListeners(e,this._db._refs,this._activeQuery.geohashes,a),window.addEventListener("bounds",function(){var e=!0,a=!1,i=void 0;try{for(var o,r=function(){var e=o.value;t.getLocationsByBoundaries(t._activeQuery.parameters.boundaries,t._activeQuery.parameters.startAt,t._activeQuery.parameters.endAt),t._activeQuery.entries.then(function(t){return e(t)})},s=n[Symbol.iterator]();!(e=(o=s.next()).done);e=!0)r()}catch(e){a=!0,i=e}finally{try{!e&&s.return&&s.return()}finally{if(a)throw i}}}),i}},{key:"attachRadiusEvent",value:function(e){var t=this,a=new Event("radius"),n=[],i={then:function(e){n.push(e),window.dispatchEvent(a)}};return this._activeQuery.dbListeners=u.GofDbListeners.attachDbListeners(e,this._db._refs,this._activeQuery.geohashes,a),window.addEventListener("radius",function(){var e=!0,a=!1,i=void 0;try{for(var o,r=function(){var e=o.value;t.getLocationsByRadius(t._activeQuery.parameters.center,t._activeQuery.parameters.radius,t._activeQuery.parameters.startAt,t._activeQuery.parameters.endAt),t._activeQuery.entries.then(function(t){return e(t)})},s=n[Symbol.iterator]();!(e=(o=s.next()).done);e=!0)r()}catch(e){a=!0,i=e}finally{try{!e&&s.return&&s.return()}finally{if(a)throw i}}}),i}},{key:"destroy",value:function(){this._activeQuery.dbListeners!=[]&&this._activeQuery.dbListeners.forEach(function(e){e.off()})}}]),e}();t.default=c,e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.GofUtils=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(2),s=n(r);t.GofUtils=function(){function e(){i(this,e)}return o(e,null,[{key:"getGeohashByLocation",value:function(e,t){return s.default.encode(e.lat,e.lng,t)}},{key:"getGeohashPrecisions",value:function(e,t,a){for(var n=[],i=0;a-t>=i;i++)n.push(e.substring(0,e.length-i));return n}},{key:"setPrecisionsForEntry",value:function(e,t){var a=t;return a.minPrecision=e,a.maxPrecision=9,a}},{key:"getGeohashActions",value:function(e,t){var a={};return a.add=t.filter(function(t){return e.indexOf(t)<0}),a.delete=e.filter(function(e){return t.indexOf(e)<0}),a.update=e.filter(function(e){return a.add.concat(a.delete).indexOf(e)<0}),a}},{key:"getGeohashesInBoundaries",value:function(e,t){return s.default.bboxes(e.sw.lat,e.sw.lng,e.ne.lat,e.ne.lng,t)}},{key:"getLocationsInBoundaries",value:function(e,t){var a=this,n=[];return e.map(function(e){e.val()&&e.forEach(function(e){a.isInBoundaries(e.val(),t)&&n.push(new Promise(function(t,a){t(e.key)}))})}),Promise.all(n)}},{key:"isInBoundaries",value:function e(t,a){var e=!1;return a.sw.lat<=t.lat&&a.sw.lng<=t.lng&&a.ne.lat>=t.lat&&a.ne.lng>=t.lng&&(e=!0),e}},{key:"getBoundariesFromRadius",value:function(e,t){var a=110.54,n=111.32,i={sw:{},ne:{}};return i.sw.lat=e.lat-1/a*t,i.sw.lng=e.lng-1/(n*Math.cos(this.degreesToRadians(e.lat)))*t,i.ne.lat=e.lat+1/a*t,i.ne.lng=e.lng+1/(n*Math.cos(this.degreesToRadians(e.lat)))*t,i}},{key:"getLocationsInRadius",value:function(e,t,a){var n=this,i=[];return e.map(function(e){e.val()&&e.forEach(function(e){n.isInRadius(e.val(),t,a)&&i.push(new Promise(function(t,a){t(e.key)}))})}),Promise.all(i)}},{key:"isInRadius",value:function e(t,a,n){var e=!1;return this.distBtwLocations(t,a)<=n&&(e=!0),e}},{key:"distBtwLocations",value:function(e,t){var a=Math.PI*t.lat/180,n=Math.PI*e.lat/180,i=t.lng-e.lng,o=Math.PI*i/180,r=Math.sin(a)*Math.sin(n)+Math.cos(a)*Math.cos(n)*Math.cos(o);return r=Math.acos(r),r=180*r/Math.PI,r=60*r*1.1515,r*=1.609344}},{key:"caluclatePrecisionFromBoundaries",value:function(e){var t=void 0,a=this.distBtwLocations({lat:e.sw.lat,lng:e.sw.lng},{lat:e.ne.lat,lng:e.ne.lng});return t=a<.02?9:a<.1?8:a<.7?7:a<4?6:a<25?5:a<150?4:a<800?3:a<4e3?2:1}},{key:"degreesToRadians",value:function(e){return e*Math.PI/180}}]),e}()},function(e,t){e.exports=require("ngeohash")},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.GofDb=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(1);t.GofDb=function(){function e(t,a){n(this,e);var i=t.replace(" ","-").toLowerCase();this._refs={entries:a.child(""+i),geohashes:a.child(i+"-geo")},this._utils=o.GofUtils}return i(e,[{key:"pushEntry",value:function(e){return this._refs.entries.push(e)}},{key:"setGeohashLocations",value:function(e,t,a){return Promise.all(this.getLocationNodesToAdd(e,t,a))}},{key:"fetchLocations",value:function(e,t,a){for(var n=[],i=t-1;a>i;i++)n.push(this._refs.entries.child(""+e[i]).once("value"));return Promise.all(n)}},{key:"getLocationsFromGeohashes",value:function(e){for(var t=[],a=0;a<e.length;a++)t.push(this._refs.geohashes.child(""+e[a]).once("value"));return Promise.all(t).catch(function(){throw new Error("Unable to get the entries.")})}},{key:"updateEntry",value:function(e,t,a){var n=this,i=this._utils.setPrecisionsForEntry(a,t),o=this._utils.getGeohashByLocation(t.location,i.maxPrecision),r=this._utils.getGeohashPrecisions(o,i.minPrecision,i.maxPrecision);return this._refs.entries.child(""+e).once("value").then(function(a){var i=a.val(),o=n._utils.getGeohashByLocation(i.location,i.maxPrecision),s=n._utils.getGeohashPrecisions(o,i.minPrecision,i.maxPrecision),u=[],c=n._utils.getGeohashActions(s,r);return u.concat(n.getLocationNodesToAdd(e,t.location,c.add)),u.concat(n.getLocationNodesToUpdate(e,t.location,c.update)),u.concat(n.getLocationNodesToDelete(e,c.delete)),u.push(n._refs.entries.child(""+e).update(t)),Promise.all(u)}).catch(function(){throw new Error('\n            Unable to update the entry, Make sure the entry with "'+e+'" exists\n          ')})}},{key:"deleteEntry",value:function(e){var t=this;return this._refs.entries.child(""+e).once("value").then(function(e){var a=e.val(),n=t._utils.getGeohashByLocation(a.location,a.maxPrecision),i=t._utils.getGeohashPrecisions(n,a.minPrecision,a.maxPrecision),o=t.getLocationNodesToDelete(e.key,i);return o.push(t._refs.entries.child(""+e.key).remove()),Promise.all(o)}).catch(function(){throw new Error('\n            Unable to delete the entry, Make sure the entry with "'+e+'" exists\n          ')})}},{key:"getLocationNodesToAdd",value:function(e,t,a){for(var n=[],i=0;a.length>i;i++)n.push(this._refs.geohashes.child(a[i]+"/"+e).set(t));return n}},{key:"getLocationNodesToUpdate",value:function(e,t,a){for(var n=[],i=0;a.length>i;i++)n.push(this._refs.geohashes.child(a[i]+"/"+e).update(t));return n}},{key:"getLocationNodesToDelete",value:function(e,t){for(var a=[],n=0;t.length>n;n++)a.push(this._refs.geohashes.child(t[n]+"/"+e).remove());return a}}]),e}()},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.GofValidation=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(5),r=a(7),s=a(9),u=a(10),c=a(11),l=a(12),f=a(13),d=a(14),h=a(15),v=a(16),y=a(17);t.GofValidation=function(){function e(){n(this,e)}return i(e,null,[{key:"validateConstructor",value:function(e,t,a){(0,h.validateNameParameter)(e,a),(0,o.validateDbParameter)(t,a)}},{key:"validateLocationsByRadius",value:function(e,t,a,n,i){(0,r.validateCenterParameter)(e,i),(0,s.validateRadiusParameter)(t,i),(0,u.validateEntryLimitationParameters)(a,n,i)}},{key:"validateLocationsByBoundaries",value:function(e,t,a,n){(0,c.validateBoundariesParameter)(e,n,"boundaries"),(0,u.validateEntryLimitationParameters)(t,a,n)}},{key:"validateCreateEntry",value:function(e,t,a,n){(0,l.validateEntryParameter)(e,n,"entry.location"),(0,f.validatePriorityParameter)(t,n),(0,d.validateMaxPrecisionParameter)(a,n)}},{key:"validateUpdateEntryLocation",value:function(e,t,a,n){(0,v.validatePushKeyParameter)(e,n),(0,y.validateNewValueParameter)(t,n,"newValue.location"),(0,f.validatePriorityParameter)(a,n)}},{key:"validateDeleteEntry",value:function(e,t){(0,v.validatePushKeyParameter)(e,t)}},{key:"validateOn",value:function(){(0,v.validatePushKeyParameter)(pushKey,fName)}}]),e}()},function(e,t,a){"use strict";function n(e,t){i.GofBasicValidation.validateObject(e,{fName:t,p1:"firebase.database()"}),i.GofBasicValidation.validateReference(e,{fName:t,p1:"firebase.database()"})}Object.defineProperty(t,"__esModule",{value:!0}),t.validateDbParameter=n;var i=a(6)},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();t.GofBasicValidation=function(){function e(){a(this,e)}return i(e,null,[{key:"validateNumber",value:function(e,t){"number"!=typeof e?this.throwError(t.fName,t.p1+" must be of type number!"):isNaN(e)&&this.throwError(t.fName,t.p1+" should not contain the value NaN!")}},{key:"validateString",value:function(e,t){"string"!=typeof e&&this.throwError(t.fName,t.p1+" must be of type string!")}},{key:"validateFunction",value:function(e,t){"function"!=typeof e&&this.throwError(t.fName,t.p1+" must be of type function!")}},{key:"validateObject",value:function(e,t){"object"!==("undefined"==typeof e?"undefined":n(e))&&this.throwError(t.fName,t.p1+" must be of type object!")}},{key:"containsSpecialChars",value:function(e,t){e.match(/[^A-Za-z0-9\-_ ]/)&&this.throwError(t.fName,t.p1+" should not contain special chars!")}},{key:"containsSpaces",value:function(e,t){/\s/.test(e)&&this.throwError(t.fName,t.p1+" should not contain white spaces!")}},{key:"validateReference",value:function(e,t){"function"!=typeof e.child&&this.throwError(t.fName,t.p1+" is not a valid firebase database reference!")}},{key:"isLowerThan",value:function(e,t,a){e<t&&this.throwError(a.fName,a.p1+" must be higher or same as "+a.p2+"!")}},{key:"isHigherThan",value:function(e,t,a){e>t&&this.throwError(a.fName,a.p1+" must be lower or same as "+a.p2+"!")}},{key:"hasDecimalPlaces",value:function(e,t){e%1!=0&&this.throwError(t.fName,t.p1+" should not contain decimal places!")}},{key:"throwError",value:function(e,t){throw new Error(e+" - "+t)}}]),e}()},function(e,t,a){"use strict";function n(e,t){i.GofCoordinatesValidation.validateCoordinates(e,t,"center")}Object.defineProperty(t,"__esModule",{value:!0}),t.validateCenterParameter=n;var i=a(8)},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.GofCoordinatesValidation=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(6);t.GofCoordinatesValidation=function(){function e(){n(this,e)}return i(e,null,[{key:"validateCoordinates",value:function(e,t,a){this.validateLat(e.lat,t,a+".lat"),this.validateLng(e.lng,t,a+".lng")}},{key:"validateLat",value:function(e,t,a){o.GofBasicValidation.validateNumber(e,{fName:t,p1:a}),o.GofBasicValidation.isHigherThan(e,90,{fName:t,p1:a,p2:90}),o.GofBasicValidation.isLowerThan(e,-90,{fName:t,p1:a,p2:-90})}},{key:"validateLng",value:function(e,t,a){o.GofBasicValidation.validateNumber(e,{fName:t,p1:a}),o.GofBasicValidation.isHigherThan(e,180,{fName:t,p1:a,p2:180}),o.GofBasicValidation.isLowerThan(e,-180,{fName:t,p1:a,p2:-180})}}]),e}()},function(e,t,a){"use strict";function n(e,t){i.GofBasicValidation.validateNumber(e,{fName:t,p1:"radius"}),i.GofBasicValidation.isLowerThan(e,0,{fName:t,p1:"radius",p2:"0"})}Object.defineProperty(t,"__esModule",{value:!0}),t.validateRadiusParameter=n;var i=a(6)},function(e,t,a){"use strict";function n(e,t,a){o(t,a,"endAt"),i(e,t,a,"startAt")}function i(e,t,a,n){r.GofBasicValidation.validateNumber(e,{fName:a,p1:n}),r.GofBasicValidation.isLowerThan(e,1,{fName:a,p1:n,p2:"1"}),r.GofBasicValidation.hasDecimalPlaces(e,{fName:a,p1:n}),r.GofBasicValidation.isHigherThan(e,t,{fName:a,p1:n,p2:"endAt"})}function o(e,t,a){r.GofBasicValidation.validateNumber(e,{fName:t,p1:a}),r.GofBasicValidation.hasDecimalPlaces(e,{fName:t,p1:a})}Object.defineProperty(t,"__esModule",{value:!0}),t.validateEntryLimitationParameters=n;var r=a(6)},function(e,t,a){"use strict";function n(e,t,a){i.GofCoordinatesValidation.validateCoordinates(e.sw,t,a+".sw"),i.GofCoordinatesValidation.validateCoordinates(e.ne,t,a+".ne"),o.GofBasicValidation.isHigherThan(e.sw.lat,e.ne.lat,{fName:t,p1:"boundaries.sw.lat",p2:"boundaries.ne.lat"}),o.GofBasicValidation.isHigherThan(e.sw.lng,e.ne.lng,{fName:t,p1:"boundaries.sw.lng",p2:"boundaries.ne.lng"})}Object.defineProperty(t,"__esModule",{value:!0}),t.validateBoundariesParameter=n;var i=a(8),o=a(6)},function(e,t,a){"use strict";function n(e,t,a){i.GofCoordinatesValidation.validateCoordinates(e.location,t,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.validateEntryParameter=n;var i=a(8)},function(e,t,a){"use strict";function n(e,t){i.GofBasicValidation.validateNumber(e,{fName:t,p1:"priority"}),i.GofBasicValidation.hasDecimalPlaces(e,{fName:t,p1:"priority"}),i.GofBasicValidation.isLowerThan(e,1,{fName:t,p1:"priority",p2:"1"}),i.GofBasicValidation.isHigherThan(e,5,{fName:t,p1:"priority",p2:"5"})}Object.defineProperty(t,"__esModule",{value:!0}),t.validatePriorityParameter=n;var i=a(6)},function(e,t,a){"use strict";function n(e,t){i.GofBasicValidation.validateNumber(e,{fName:t,p1:"maxPrecision"}),i.GofBasicValidation.hasDecimalPlaces(e,{fName:t,p1:"maxPrecision"}),i.GofBasicValidation.isLowerThan(e,7,{fName:t,p1:"maxPrecision",p2:"7"}),i.GofBasicValidation.isHigherThan(e,9,{fName:t,p1:"maxPrecision",p2:"9"})}Object.defineProperty(t,"__esModule",{value:!0}),t.validateMaxPrecisionParameter=n;var i=a(6)},function(e,t,a){"use strict";function n(e,t){i.GofBasicValidation.validateString(e,{fName:t,p1:"name"}),i.GofBasicValidation.containsSpecialChars(e,{fName:t,p1:"name"})}Object.defineProperty(t,"__esModule",{value:!0}),t.validateNameParameter=n;var i=a(6)},function(e,t,a){"use strict";function n(e,t){i.GofBasicValidation.validateString(e,{fName:t,p1:"pushKey"}),i.GofBasicValidation.containsSpecialChars(e,{fName:t,p1:"pushKey"}),i.GofBasicValidation.containsSpaces(e,{fName:t,p1:"pushKey"})}Object.defineProperty(t,"__esModule",{value:!0}),t.validatePushKeyParameter=n;var i=a(6)},function(e,t,a){"use strict";function n(e,t,a){(0,i.validateEntryParameter)(e,t,"newValue.location"),(0,o.validatePriorityParameter)(e.minPrecision,t),(0,r.validateMaxPrecisionParameter)(e.maxPrecision,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.validateNewValueParameter=n;var i=a(12),o=a(13),r=a(14)},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();t.GofDbListeners=function(){function e(){a(this,e)}return n(e,null,[{key:"attachDbListeners",value:function(e,t,a,n){var i=[];return"value"===e?i.push(this.onValue(t,a,n)):"child_added"===e?i.push(this.onChildAdded(t,a,n)):"child_changed"===e?i.push(this.onChildChanged(t,a,n)):"child_removed"===e&&i.push(this.onChildDeleted(t,a,n)),i}},{key:"onValue",value:function(e,t,a){var n=[];return t.forEach(function(t){n.push(e.geohashes.child(t).on("value",function(){window.dispatchEvent(a)}))}),n}},{key:"onChildAdded",value:function(e,t,a){var n=[];return t.forEach(function(t){e.geohashes.child(t).on("child_added",function(e){window.dispatchEvent(a)})}),n}},{key:"onChildChanged",value:function(e,t,a){var n=[];return t.forEach(function(t){e.geohashes.child(t).on("child_changed",function(e){window.dispatchEvent(a)})}),n}},{key:"onChildDeleted",value:function(e,t,a){var n=[];return t.forEach(function(t){e.geohashes.child(t).on("child_deleted",function(e){window.dispatchEvent(a)})}),n}}]),e}()}]);